<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Valeria's Mystery: The K-pop Warriors</title>

  <!-- Bootstrap (opcional, para modal/estÃ©tica) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous"
  />

  <!-- Cache busting -->
  <link rel="stylesheet" href="css/style.css?v=3" />
</head>

<body>
  <div class="app-shell">

    <!-- =======================
         VISTA JUGADOR (solo rol)
         ======================= -->
    <section id="player-view" class="view hidden">
      <div class="player-card">
        <div class="player-title">Tu rol</div>
        <img id="player-role-img" class="player-role-img" alt="Rol" />
        <div id="player-role-text" class="player-role-text"></div>

        <div class="player-hint">
          Guardalo en secreto. Cuando todos tengan su rol, vuelvan al host.
        </div>
      </div>
    </section>

    <!-- =======================
         VISTA HOST
         ======================= -->
    <section id="host-view" class="view hidden">
      <header class="host-header">
        <h1 class="host-title">ğŸŒ™ Valeria's Mystery: The K-pop Warriors</h1>
        <p class="host-subtitle">
          Juego de deducciÃ³n social en Valeria del Mar. El host reparte roles por QR y no juega.
        </p>

        <!-- BotÃ³n para reabrir el modal -->
        <div class="mt-3">
          <button id="openStoryBtn" type="button" class="btn btn-outline-light btn-sm">
            ğŸ“œ Historia y reglas
          </button>
        </div>
      </header>

      <!-- SETUP -->
      <div id="setup-panel" class="panel">
        <label class="form-label" for="playersCount">Cantidad de participantes (mÃ­nimo 4)</label>

        <div class="setup-row">
          <input
            id="playersCount"
            type="number"
            min="4"
            max="40"
            value="6"
            class="form-control setup-input"
          />
          <button id="startBtn" class="btn btn-primary setup-btn">Iniciar reparto</button>
        </div>

        <div class="setup-note">
          Roles: 1 Demonio encubierto, 1 Guerrera Sanadora (Protectora), 1 Guerrera Detectivesca, resto Pueblo.
        </div>
      </div>

      <!-- DEALING -->
      <div id="dealing-panel" class="panel hidden">
        <div class="deal-top">
          <div class="deal-progress">
            Jugador <span id="currentPlayer">1</span> de <span id="totalPlayers">6</span>
          </div>
          <div class="deal-instructions">
            Que el jugador escanee el QR para ver su rol.
          </div>
        </div>

        <div class="qr-box">
          <img id="qrImg" class="qr-img" alt="QR del jugador" />
        </div>

        <div class="deal-actions">
          <button id="nextBtn" class="btn btn-success">Siguiente jugador</button>
          <button id="restartBtn" class="btn btn-outline-secondary">Reiniciar</button>
        </div>

        <div class="deal-footnote">
          Tip: Pediles que vuelvan atrÃ¡s cuando vean su rol, y pasÃ¡ al siguiente.
        </div>
      </div>
    </section>
  </div>

  <!-- =======================
       MODAL: HISTORIA Y REGLAS
       ======================= -->
  <div
    class="modal fade"
    id="storyModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="storyModalTitle"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title" id="storyModalTitle">ğŸŒ™ Valeria's Mystery: The K-pop Warriors</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
          <p class="mb-3">
            Bienvenidos a <strong>"Valeria's Mystery: The K-pop Warriors"</strong>. En este juego de deducciÃ³n social,
            de <strong>4 o mÃ¡s participantes</strong>, adaptamos la dinÃ¡mica de la mafia a una historia de guerreras K-pop
            en la playa de Valeria del Mar.
          </p>

          <div class="mb-3">
            <h6 class="mb-2">ğŸ­ Roles</h6>
            <ul class="mb-0">
              <li><strong>Guerrera Sanadora (Protectora)</strong>: puede proteger a alguien por la noche.</li>
              <li><strong>Guerrera Detectivesca</strong>: busca descubrir a los demonios.</li>
              <li><strong>Demonios encubiertos</strong>: intentan eliminar a las guerreras.</li>
              <li><strong>Pueblo</strong>: debate y vota durante el dÃ­a.</li>
            </ul>
          </div>

          <div class="mb-3">
            <h6 class="mb-2">ğŸŒ“ Fases del juego</h6>
            <ul class="mb-0">
              <li><strong>DÃ­a:</strong> debatir, acusar y votar para eliminar a un posible demonio.</li>
              <li><strong>Noche:</strong> los demonios eligen a quiÃ©n â€œasesinarâ€, y la protectora puede salvar a alguien.</li>
            </ul>
          </div>

          <div>
            <h6 class="mb-2">ğŸ CondiciÃ³n de victoria</h6>
            <ul class="mb-0">
              <li>Ganan las guerreras si eliminan a <strong>todos los demonios</strong>.</li>
              <li>Ganan los demonios si logran superar o eliminar a las guerreras.</li>
            </ul>
          </div>

          <hr />

          <p class="mb-0 text-muted" style="font-size: 0.9rem;">
            El host <strong>no juega</strong>: solo reparte roles por QR (uno por turno).
          </p>
        </div>

        <div class="modal-footer">
          <button id="storyOkBtn" type="button" class="btn btn-primary" data-dismiss="modal">
            Entendido âœ…
          </button>
        </div>

      </div>
    </div>
  </div>

  <!-- Dependencias (Bootstrap 4 requiere jQuery) -->
  <script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
  crossorigin="anonymous"></script>

<script
  src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
  crossorigin="anonymous"></script>

<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
  crossorigin="anonymous"></script>

<script src="scripts/script.js?v=4"></script>

</body>
</html>
